<div class="container-xl px-4 mt-4" *ngIf="isLogged; else error">
  <hr class="mt-0 mb-4" />
  <div class="row">
    <div class="col-xl-4">
      <div class="card mb-4 mb-xl-0">
        <div class="card-header">Profile Picture</div>
        <div class="card-body text-center">
          <img
            class="img-account-profile rounded-circle mb-2"
            [src]="imageUrl"
            width="150px"
            height="150px"
            alt=""
          />
          <div class="small font-italic text-muted mb-4">
            JPG or PNG no larger than 5 MB
          </div>
        </div>
      </div>
      <hr />
      <div class="form-group">
        <label for="image" class="form-label">Change profile photo</label>
        <input
          class="form-control"
          type="file"
          (change)="onFileChange($event)"
        />
        <br />
        <!-- <button (click)="onUpload()" class="btn btn-success">Upload</button> -->
      </div>
    </div>
    <div class="col-xl-8">
      <!-- Account details card-->
      <div class="card mb-4">
        <div class="card-header">Account Details</div>
        <div class="card-body">
          <form
            [formGroup]="personForm"
            (ngSubmit)="onSaveChange(personForm.value)"
          >
            <div class="mb-3">
              <label class="small mb-1">Username</label>
              <input
                [value]="person.userName"
                formControlName="username"
                id="username"
                type="text"
                class="form-control"
              />
              <div
                class="alert alert-danger"
                *ngIf="username?.errors?.['required']"
              >
                Username is requiered.
              </div>
            </div>
            <div class="row gx-3 mb-3">
              <div class="col-md-6">
                <label class="small mb-1">First name</label>
                <input
                  class="form-control"
                  type="text"
                  [value]="person.firstName"
                  id="firstname"
                  formControlName="firstname"
                />
                <div
                  class="alert alert-danger"
                  *ngIf="firstname?.errors?.['required']"
                >
                  Firstname is requiered.
                </div>
              </div>
              <div class="col-md-6">
                <label class="small mb-1">Last name</label>
                <input
                  class="form-control"
                  type="text"
                  [value]="person.lastName"
                  id="lastName"
                  formControlName="lastname"
                />
                <div
                  class="alert alert-danger"
                  *ngIf="lastname?.errors?.['required']"
                >
                  Lastname is requiered.
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label class="small mb-1">Email address</label>
              <input
                class="form-control"
                type="email"
                [value]="person.email"
                id="email"
                formControlName="email"
              />
              <div
                class="alert alert-danger"
                *ngIf="email?.errors?.['required']"
              >
                Email is requiered.
              </div>
              <div class="alert alert-danger" *ngIf="email?.errors?.['email']">
                Incorrect email address.
              </div>
            </div>
            <div class="row gx-3 mb-3">
              <div class="col-md-6">
                <label class="small mb-1">Address</label>
                <input
                  class="form-control"
                  type="text"
                  [value]="person.address"
                  id="address"
                  formControlName="address"
                />
                <div
                  class="alert alert-danger"
                  *ngIf="address?.errors?.['required']"
                >
                  Address is requiered.
                </div>
              </div>
              <div class="col-md-6">
                <label class="small mb-1">Birthday</label>
                <input
                  class="form-control"
                  type="text"
                  value="{{ person.birth | date }}"
                  readonly
                />
              </div>
            </div>
            <button class="btn btn-primary" [disabled]="!personForm.valid">
              Update profile
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #error></ng-template>
